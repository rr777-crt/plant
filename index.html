<html>
    <head>
        <meta charset="UTF-8">
        <title>грохострел v:1.0.2.0</title>
        <meta name="description" content="грохострел">
        <link rel="stylesheet" href="./style.css" type="text/css">
        <!-- viewport -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    </head>
    <body>
        <header>
            <div>
                капель (воды): <b id="score">0</b>
            </div>
            <div>
                За клик +<b id="add">1</b>
            </div>
             <div>
                солнцы: <b id="suns">0</b>
            </div>
        </header>
        <main>
            <div id="button">
            </div>
        </main>
            <footer>
            <p>за клики
                  <button onclick="getClickAdd(+100000000000000000000000, 0)">
                <span>+100000000000000000000000 за клик(gjnjvexnj ntcn)
                БЕСПЛАТНО </span>
            </button>
            <button onclick="getClickAdd(2, 100)">
                <span>+2 за клик
                100 капель </span>
            </button>
            
             <button onclick="getClickAdd(5, 245)">
                <span>+5 за клик
                245 капель </span>
            </button>

             <button onclick="getClickAdd(10, 1000)">
                <span>+10 за клик
                1000 капель </span>
            </button>

            <button onclick="getClickAdd(25, 2250)">
                <span>+25 за клик
                2250 капель </span>
            </button>

            <button onclick="getClickAdd(50, 5500)">
                <span>+50 за клик</span>
                5500 капель
            </button>

             <button onclick="getClickAdd(100,10000)">
                <span>+100 за кли
                10000 капель </span>
            </button>

            <button onclick="getClickAdd(1000,50000)">
                <span>+ 1000 за клик
                50000 капель</span>
            </button>

            <button onclick="getClickAdd(15000,1000000)">
                <span>+ 15000 за клик
                1000000 капель</span>
            </button>

            <button onclick="getClickAdd(50000,5000000)">
                <span>+ 50000 за клик
                5000000 капель</span>
            </button>

           

            <button onclick="getClickAdd(200000,100000000)">
                <span>+ 200000 за клик
                100000000 капель</span>
            </button>

             <button onclick="getClickAdd(800000,500000000)">
                <span>+ 800000 за клик
                500000000 капель</span>
            </button>

              <button onclick="getClickAdd(1500000,2000000000)">
                <span>+ 1500000 за клик
                2000000000 капель</span>
            </button>
            <button onclick="getClickAdd(5000000,100000000000)">
                <span>+ 5000000 за клик
                10000000000 капель</span>
            </button>

                <button onclick="getClickAdd(10000000,10000000000000)">
                <span>+ 10000000 за клик
                1000000000000 капель</span>
            </button>

                <button onclick="getClickAdd(100000000,1000000000000000)">
                <span>+ 100000000 за клик
                100000000000000 капель</span>
                </button>
            </p>

            <button onclick="getClickAdd(10000000000,100000000000000000)">
                <span>+ 10000000000 за клик
                10000000000000000 капель</span>
                </button>

            <button onclick="getClickAdd(1000000000000000,10000000000000000000000)">
                <span>+ 1000000000000000 за клик
                1000000000000000000000 капель</span>
            </button>

            <button onclick="getClickAdd(10000000000000000000000000,10000000000000000000000000000000000000000)">
                <span>+???за клик
                10000000000000000000000000000000 капель</button>
             <button onclick="getClickAdd(10000000000000000000000000000000000000000000000000000,10000000000000000000000000000000000000000000000000000000000000)">
                <span>+!!!за клик
               10000000000000000000000000000000000000000000000000000000000000 капель</button>
             <button onclick="getClickAdd(100000000000000000000000000000000000000000000000000000000000000000000,1000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000)">
                <span>+!!!!!!!!!за клик
                1000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000 капель</button>
             <button onclick="getClickAdd(100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,10000000000000000000000000000000000000000)">
                <span>+STOPза клик
                10000000000000000000000000000000 капель</button>
        </p>
            
            <p>за майнинг
            <button onclick="mining(1 , 250)">
                <span>+1 в сек</span>
                250 капель
            </button>

             <button onclick="mining(10 , 2500)">
                <span>+10 в сек</span>
                2500 капель
            </button>

           <button onclick="mining(100 , 20000)">
                <span>+100 в сек</span>
                20000 капель
            </button>

              <button onclick="mining(1000 , 180000)">
                <span>+1000 в сек</span>
                180000 капель
            </button>

            <button onclick="mining(10000 , 2000000)">
                <span>+10000 в сек</span>
                2000000 капель
            </button>

            <button onclick="mining(100000 , 1900000)">
                <span>+100000 в сек</span>
                19000000 капель
            </button>

                 <button onclick="mining(1000000 , 17000000)">
                <span>+1000000 в сек</span>
                170000000 капель
            </button>
                
                

                <button onclick="mining(10000000 , 150000000)">
                <span>+10000000 в сек</span>
                1500000000 капель
            </button>

                 <button onclick="mining(100000000 , 1200000000)">
                <span>+100000000 в сек</span>
                12000000000 капель
            </button>

                   <button onclick="mining(1000000000 , 10000000000)">
                <span>+1000000000 в сек</span>
                100000000000 капель
            </button>

                <button onclick="mining(10000000000 , 190000000000)">
                <span>+1000000000 в сек</span>
                1900000000000 капель
                </button>
                 <button onclick="mining(10000000000000000 , 190000000000180000000000)">
                <span>+1000000000000000 в сек</span>
                1900000000000180000000000 капель
                </button>
            </p>
             <p>солнце
            <button onclick="getScoreForSuns(120, 1)">
                <span>+ 120 капель</span>
                за 1 солнце
            </button>

            <button onclick="getScoreForSuns(850, 5)">
                <span>+ 850 капель</span>
                за 5 солнце
            </button>

             <button onclick="getScoreForSuns(8750, 10)">
                <span>+ 8750 капель</span>
                за 10 солнце
            </button>

            <button onclick="getScoreForSuns(100000, 25)">
                <span>+ 100000 капель</span>
                за 25 солнце
            </button>

            <button onclick="getScoreForSuns(100000000, 100)">
                <span>+ 100000000 капель</span>
                за 100 солнце
            </button>

                   <button onclick="getScoreForSuns(100000000000, 200)">
                <span>+ 100000000000 капель</span>
                за 200 солнце
            </button>

               

                  <button onclick="getScoreForSuns(1000000000000, 210)">
                <span>+ 1000000000000 капель</span>
                за 210 солнце
            </button>

                 <button onclick="getScoreForSuns( 1000000000000000000000, 1000)">
                <span>+ 1000000000000000000000 капель</span>
                за 1000 солнце
            </button>
                  <button onclick="getScoreForSuns( 1000000000000000000000000000000000000000000000000000, 10000)">
                <span>+ 1000000000000000000000000000000000000000000000000000 капель</span>
                за 10000 солнце
            </button>

                
               

                 
              </p>
            
    <p>V:ТЕСТ 1.0.2.0</p>
        <p> - ВЫ ИГРАЕТЕ В ТЕСТ</p>
        <p> -  тест: новые улутшения новый грохострел</p>
        <p> -  </p>
        <p> - 
        </p>

       <h1 class ="gg">ИНФО ЛИСТ</h1>
<p>получение очков значит получение грохострелов макс:100000000000?</p>
            <p>ИГРА ОБЕЩАЕТ ЧТО СОЛНЫШКИ БУДУТ ДОВАТСЯ СЛОЖНО</p>
            <p>到目前为止，我是什么？?? 我正在获得力量，我只是给予一个简单的奖励，但我会达到最大值并摧毁E-T-O-T M-I-R</p>
             <p>



               
                <button onclick="getClickAdd(6666666666,66666666666)">
                <span>:???:
       <button onclick="buyCase()" style="margin-top: 20px; padding: 10px; background-color: gold; border-radius: 10px;">
    <span style="font-weight: bold;">Купить кейс (1000 капель)</span>
    <br>Шансы:
    <br>50% - 900 капель
    <br>30% - 5 солнц
    <br>15% - 1,000,000 капель
    <br>5% - 100 солнц

                <button onclick="resetGame()" style="background-color: #ff4444; color: white;">
    Сбросить прогресс
</button>
       </button>
                </span>
                    <h2 style="text-align: center; margin: 5px 0;">🛒 Магазин предметов</h2>
    <div id="shop-items-container" style="
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px;
        padding: 10px;
    "></div>
</footer>

<script>
'use strict';

// Стили для магазина
const shopStyle = document.createElement('style');
shopStyle.textContent = `
    .shop-item {
        background: #444;
        border-radius: 8px;
        padding: 10px;
        width: 200px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    .shop-item h3 {
        margin: 0 0 5px 0;
        color: #ffcc00;
    }
    .shop-item p {
        margin: 5px 0;
        font-size: 14px;
    }
    .shop-item button {
        background: #4CAF50;
        color: white;
        border: none;
        padding: 5px 10px;
        border-radius: 4px;
        cursor: pointer;
        margin-top: 5px;
        width: 100%;
    }
    .shop-item button:disabled {
        background: #555;
        cursor: not-allowed;
    }
    .price-drops { color: #88f; }
    .price-suns { color: #ffcc00; }
`;
document.head.appendChild(shopStyle);

// Обновленная функция создания магазина
function createShop() {
    const container = document.getElementById('shop-items-container');
    container.innerHTML = '';

    for (const [key, item] of Object.entries(shopItems)) {
        const itemDiv = document.createElement('div');
        itemDiv.className = 'shop-item';
        
        const itemName = document.createElement('h3');
        itemName.textContent = item.name;
        
        const itemOwned = document.createElement('p');
        itemOwned.textContent = `Куплено: ${item.owned}`;
        itemOwned.style.color = '#aaa';
        
        const itemDesc = document.createElement('p');
        itemDesc.textContent = item.description;
        
        const itemPrice = document.createElement('p');
        const priceType = item.priceType === 'drops' ? 'капель' : 'солнц';
        const priceClass = item.priceType === 'drops' ? 'price-drops' : 'price-suns';
        itemPrice.innerHTML = `Цена: <span class="${priceClass}">${item.price} ${priceType}</span>`;
        
        const buyButton = document.createElement('button');
        buyButton.textContent = 'Купить';
        
        // Функция проверки возможности покупки
        const canAfford = () => {
            if (item.priceType === 'drops') {
                return score >= item.price;
            } else {
                return suns >= item.price;
            }
        };
        
        // Обновление состояния кнопки
        const updateButton = () => {
            if (canAfford()) {
                buyButton.disabled = false;
                buyButton.style.opacity = '1';
            } else {
                buyButton.disabled = true;
                buyButton.style.opacity = '0.7';
            }
            itemOwned.textContent = `Куплено: ${item.owned}`;
        };
        
        updateButton();
        
        // Обработчик покупки
        buyButton.onclick = function() {
            if (canAfford()) {
                // Списание валюты
                if (item.priceType === 'drops') {
                    getScore(-item.price);
                } else {
                    getSuns(-item.price);
                }
                
                // Применение эффекта
                item.effect();
                item.owned++;
                
                // Сообщение о покупке
                showPurchaseMessage(`Вы купили ${item.name}!`);
                
                // Обновление интерфейса
                updateButton();
                saveSystem.saveGame();
            }
        };
        
        itemDiv.appendChild(itemName);
        itemDiv.appendChild(itemOwned);
        itemDiv.appendChild(itemDesc);
        itemDiv.appendChild(itemPrice);
        itemDiv.appendChild(buyButton);
        container.appendChild(itemDiv);
    }
}

// Функция показа сообщения о покупке
function showPurchaseMessage(text) {
    const msg = document.createElement('div');
    msg.textContent = text;
    msg.style.position = 'fixed';
    msg.style.bottom = '100px';
    msg.style.left = '50%';
    msg.style.transform = 'translateX(-50%)';
    msg.style.backgroundColor = '#4CAF50';
    msg.style.color = 'white';
    msg.style.padding = '10px 20px';
    msg.style.borderRadius = '5px';
    msg.style.zIndex = '1001';
    msg.style.animation = 'fadeOut 2s ease-out 1s forwards';
    
    document.body.appendChild(msg);
    
    setTimeout(() => {
        msg.remove();
    }, 3000);
}

// Добавляем анимацию для сообщений
const messageStyle = document.createElement('style');
messageStyle.textContent = `
    @keyframes fadeOut {
        from { opacity: 1; }
        to { opacity: 0; transform: translateX(-50%) translateY(-20px); }
    }
`;
document.head.appendChild(messageStyle);

// Обновляем кнопки магазина при изменении валюты
function updateShopButtons() {
    const shopContainer = document.getElementById('shop-items-container');
    if (shopContainer) {
        const buttons = shopContainer.querySelectorAll('button');
        buttons.forEach(button => {
            const itemDiv = button.closest('.shop-item');
            const itemName = itemDiv.querySelector('h3').textContent;
            const item = Object.values(shopItems).find(i => i.name === itemName);
            
            if (item) {
                const canAfford = item.priceType === 'drops' 
                    ? score >= item.price 
                    : suns >= item.price;
                
                button.disabled = !canAfford;
                button.style.opacity = canAfford ? '1' : '0.7';
            }
        });
    }
}

// Модифицируем функции getScore и getSuns для обновления магазина
const originalGetScore = getScore;
getScore = function(n) {
    originalGetScore(n);
    updateShopButtons();
};

const originalGetSuns = getSuns;
getSuns = function(n) {
    originalGetSuns(n);
    updateShopButtons();
};

// Инициализация магазина при загрузке
document.addEventListener('DOMContentLoaded', function() {
    // Сначала загружаем сохранение
    saveSystem.loadGame();
    
    // Затем создаем магазин
    createShop();
    
    // Обновляем кнопки
    updateShopButtons();
    
    // Инициализируем автосохранение
    saveSystem.initAutoSave();
});
</script>

                </footer>
    </body>
           <!-- Добавьте этот HTML перед закрывающим тегом </body> -->

    <script src="./main.js"></script>
    <script src="./item.js"></script>
    <script src ="./save.js"></script>
</html>
